# Development Roadmap

## Version 1.0 - MVP
- [ ] Setup project structure
- [ ] Create data models
  - [ ] Player model
  - [ ] Court model
  - [ ] Team model
  - [ ] Match model
  - [ ] Round model
- [ ] Implement services
  - [ ] TournamentService
- [ ] Create screens
  - [ ] SetupScreen (players + courts)
  - [ ] RoundDisplayScreen
- [ ] Create widgets
  - [ ] PlayerList
  - [ ] CourtList
  - [ ] MatchCard
- [ ] Testing & debugging

## Version 2.0 - Scoring & Algorithm
- [ ] Implement score input
  - [ ] ScoreInputScreen
  - [ ] ScoreButtonGrid widget
- [ ] Implement Americano algorithm
  - [ ] PlayerStats calculation
  - [ ] Optimal pairing logic
  - [ ] Match generation
- [ ] Add leaderboard view
- [ ] Testing & debugging

## Version 3.0 - Leaderboard & Ranking (SPECIFICATION_V3.md)
- [x] Create data models
  - [x] PlayerStanding model with all statistics
- [x] Implement services
  - [x] StandingsService with hierarchical ranking algorithm
    - [x] Total points calculation (primary ranking)
    - [x] Wins count (1st tiebreaker)
    - [x] Head-to-head records (2nd tiebreaker)
    - [x] Biggest win margin (3rd tiebreaker)
    - [x] Smallest loss margin (4th tiebreaker)
    - [x] Shared ranking support
- [x] Create screens
  - [x] LeaderboardScreen with live standings (F-007)
    - [x] Top 3 visual highlighting with medals
    - [x] Detailed player statistics display
    - [x] Responsive mobile design
- [x] Integration
  - [x] Add navigation from RoundDisplayScreen
  - [x] Real-time standings calculation
- [x] Testing & debugging
  - [x] Unit tests for PlayerStanding model
  - [x] Comprehensive unit tests for StandingsService (all test cases from spec)
  - [x] Widget tests for LeaderboardScreen

## Version 4.0 - Final Round System (SPECIFICATION_V4.md)
- [x] Data Model Updates (F-010, F-011, F-012, F-013)
  - [x] Add `isFinalRound` flag to Round model
  - [x] Add `isCompleted` flag to Tournament model
  - [x] Add `pauseCount` to PlayerStanding for break tracking
  - [x] Update JSON serialization for persistence
- [x] Final Round Pairing Algorithm (F-011)
  - [x] Implement `generateFinalRound()` in TournamentService
  - [x] Rank-based pairing (R1+R3 vs R2+R4 pattern)
  - [x] Rolling pause system for overflow players
  - [x] Hierarchical break selection (most games → lowest rank → fewest pauses)
  - [x] Top half protection from sitting out
  - [x] Court prioritization (best courts for top matches)
- [x] Final Round Detection & UI (F-010)
  - [x] "Start Sidste Runde" button (gold theme, larger)
  - [x] Show only after 3+ completed rounds
  - [x] Confirmation dialog with leaderboard preview
  - [x] Final round visual identification (trophy icon, gold AppBar)
  - [x] Validation to prevent premature activation
- [x] Tournament Completion (F-013)
  - [x] TournamentCompletionScreen with podium display
  - [x] Tournament statistics (matches, duration, top scorer, most wins, biggest win)
  - [x] Final leaderboard display
  - [x] Confetti animation
  - [x] Auto-navigation when final round completes
  - [x] Mark tournament as completed
  - [x] "Start Ny Turnering" option
- [x] Testing
  - [x] Unit tests for generateFinalRound (all spec scenarios)
  - [x] Tests for perfect divisibility (12 players)
  - [x] Tests for 1 overflow (13 players)
  - [x] Tests for 2 overflow (14 players)
  - [x] Tests for pause prioritization
  - [x] Tests for top half protection

## Version 5.0 - Tournament Settings & Configuration (SPECIFICATION_V5.md)
- [x] Data Model Updates (F-014, F-015, F-016, F-017)
  - [x] Create TournamentSettings model with validation
  - [x] Add PairingStrategy enum (balanced, topAlliance, maxCompetition)
  - [x] Add JSON serialization for persistence
  - [x] Update Tournament model to include settings field
  - [x] Backward compatibility with default settings
  - [x] Unit tests for TournamentSettings model
- [x] Settings UI (F-014)
  - [x] Create TournamentSettingsWidget with ExpansionTile
  - [x] Collapsible settings section on SetupScreen
  - [x] Visual indicator when settings are customized
  - [x] Settings summary display when collapsed
  - [x] Integration with SetupScreen
- [x] Minimum Rounds Setting (F-015)
  - [x] Stepper UI component (2-10 range, default: 3)
  - [x] Update canStartFinalRound logic to use setting
  - [x] Validation and user feedback
- [x] Points Per Match Setting (F-016)
  - [x] Dropdown selector (18-32 even numbers, default: 24)
  - [x] Dynamic ScoreButtonGrid generation
  - [x] Update MatchCard and ScoreInputDialog
  - [x] Backward compatibility (default to 24)
- [x] Final Round Pairing Strategy (F-017)
  - [x] Balanced pairing (R1+R3 vs R2+R4) - default
  - [x] Top Alliance pairing (R1+R2 vs R3+R4)
  - [x] Max Competition pairing (R1+R4 vs R2+R3)
  - [x] Radio button UI with descriptions
  - [x] TournamentService implementation for all strategies
  - [x] Comprehensive unit tests for all three strategies
- [x] Testing & Integration
  - [x] Unit tests for all pairing strategies
  - [x] Tests for settings validation and serialization
  - [x] Backward compatibility verified

## Version 7.0 - Visual Redesign (SPECIFICATION_V7.md)
- [x] Color System & Theme
  - [x] Create AppColors utility class with spec-defined colors (F-018)
  - [x] Court colors (blue theme) - blue[50] to blue[900]
  - [x] Bench colors (orange theme) - orange[50] to orange[900]
  - [x] Score colors (green/grey)
  - [x] Update app theme to use blue seed color
- [x] Court Visualization Components
  - [x] PlayerMarker widget (F-021) - person icon + name with blue border
  - [x] NetDivider widget (F-022) - vertical gradient with VS badge
  - [x] ScoreDisplay widget (F-023) - grey placeholder or green scored
  - [x] TeamSide widget (F-020) - team label + players + score
  - [x] BenchPlayerChip widget (F-024) - bench emoji + person icon
  - [x] BenchSection widget (F-024) - orange themed pause section
- [x] Match Card Redesign (F-019)
  - [x] Blue header with court name and edit button
  - [x] Blue gradient background
  - [x] Three-column layout (Team 1 | Net | Team 2)
  - [x] Increased elevation (6) and rounded borders
  - [x] Preserved player override functionality
- [x] Round Display Updates
  - [x] Integrated BenchSection for players on pause
  - [x] Consistent orange theme for pause section
- [ ] Testing & Validation
  - [ ] Flutter analyze verification
  - [ ] Unit/widget tests for new components
  - [ ] Manual testing in browser
  - [ ] Visual regression testing
  - [ ] Responsive layout testing

## Version 8.0 - Cloud Storage & Firebase Integration (SPECIFICATION_v8.md)
- [x] Firebase Setup & Configuration (F-025)
  - [x] Create Firebase project
  - [x] Register web app (and optionally mobile apps)
  - [x] Enable Firestore database
  - [x] Configure security rules for anonymous access
  - [x] Add Firebase dependencies to pubspec.yaml
  - [x] Create firebase_options.dart with configuration
  - [x] Initialize Firebase in main.dart
  - [x] Test Firebase connection
- [x] Firebase Service Layer (F-028)
  - [x] Create FirebaseService class
  - [x] Implement 8-digit tournament code generation
  - [x] Implement 6-digit passcode generation
  - [x] Implement passcode hashing (SHA-256)
  - [x] Implement saveTournament method
  - [x] Implement loadTournament method
  - [x] Implement updateTournament method
  - [x] Implement tournamentExists check
  - [x] Add error handling and retry logic
  - [ ] Unit tests for FirebaseService
- [x] Save Tournament Feature (F-026)
  - [x] Create SaveTournamentDialog widget
  - [x] Tournament name input field
  - [x] Code generation and display
  - [x] Passcode display with warning
  - [x] Copy to clipboard functionality
  - [x] Integrate save button in Settings screen (RoundDisplayScreen AppBar)
  - [x] Integrate save button in Tournament Completion screen
  - [x] Update existing tournament flow
  - [x] Success/error feedback UI
  - [x] Loading states and spinners
- [x] Load Tournament Feature (F-027)
  - [x] Create LoadTournamentDialog widget
  - [x] 8-digit code input field (numeric only)
  - [x] 6-digit passcode input field (numeric only)
  - [x] Validation and error messages
  - [x] Integrate load option in Setup screen
  - [x] Tournament restoration logic
  - [x] Navigation after load
  - [x] Handle tournament not found errors
  - [x] Handle incorrect passcode errors
- [x] UI Integration (F-029)
  - [x] Add "Cloud Lagring" button to RoundDisplayScreen AppBar
  - [x] Show current tournament code in tooltip if saved
  - [x] Add "Hent Turnering" option to Setup screen AppBar
  - [x] Visual indicators for cloud-saved tournaments
  - [x] Offline mode indicators (in dialogs)
  - [x] Consistent styling with V7 design
- [ ] Testing & Validation
  - [ ] Unit tests for code generation
  - [ ] Unit tests for passcode hashing
  - [ ] Integration tests for save/load flow
  - [ ] Test cross-device tournament access
  - [ ] Test offline behavior
  - [ ] Test error scenarios (network, wrong passcode, etc.)
  - [ ] Manual testing of complete flow
  - [ ] Flutter analyze verification
- [ ] Documentation
  - [x] Update SPECIFICATION_v8.md with detailed requirements
  - [x] Create FIREBASE_SETUP.md with setup instructions
  - [ ] Update README.md with V8 features
  - [ ] Add code comments and documentation


